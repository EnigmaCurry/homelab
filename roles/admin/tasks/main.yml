- name: Create volume for jupyter-admin
  docker_volume:
    name: "homelab_admin"

- name: Create admin systemd service
  include_role:
    name: docker-systemd-service
  vars:
    container_name: "homelab_admin"
    container_image: homelab/jupyter_ansible
    container_docker_pull: false
    container_volumes:
      - "jupyter_admin:/home/jovyan/work"
      - "{{ homelab_home }}:/home/jovyan/homelab"
      - "{{ homelab_conf }}:/etc/homelab"
      - "{{ homelab_conf }}/ssh:/home/jovyan/.ssh"
    container_labels:
      - "traefik.frontend.rule=Host:admin.{{ app_domain }}"
